(()=>{"use strict";class e{getGameBoard(e){return e}}let t=new e,i=function(){let e=document.createElement("div");return e.id="view-container",e.innerText="CONTAINER",e}(),n=new class{constructor(e,t){this.viewContainer=t,this.model=e,this.isRunning=!1,this.score=0,this.isGameOver=!1,this.gravity=16,this.timerIdPipes,this.gameTimerId,this.birdHeight=Math.ceil(window.innerHeight/3),this.birdPosition=Math.ceil(window.innerWidth/3),this.birdWidth=Math.ceil(window.innerWidth/20),this.birdHeight=Math.ceil(window.innerHeight/3),this.birdInnerHeight=Math.ceil(window.innerHeight/20)}run(){this.isRunning=!0,this.viewContainer.innerHTML="",console.log(this),this.viewContainer.append(this.getBoardHtml());let e=document.getElementById("startButton");e.addEventListener("click",(()=>{document.querySelector("#statistics").disabled=!0,document.querySelector("#game").disabled=!0,this.isRunning=!0,this.isGameOver=!1,document.getElementById("sky").removeChild(e),this.gameTimerId=window.setInterval((()=>{this.startGame()}),100),this.timerIdPipes=setInterval((()=>{this.Pipes()}),3500),document.addEventListener("keyup",(()=>{this.jump()}))}))}stop(){this.isRunning=!1}resizeUi(){this.isRunning&&(this.viewContainer.innerHTML="",this.viewContainer.append(this.getBoardHtml()))}getBoardHtml(){let e=document.createElement("div");e.id="gameboard";let t=document.createElement("div");t.id="sky",t.style.minWidth=window.innerWidth+"px",t.style.minHeight=window.innerHeight-26+"px",t.style.background="#B0E0E6",e.append(t);let i=document.createElement("div");i.id="ground",i.style.minWidth=window.innerWidth+"px",i.style.minHeight="50px",i.style.bottom="0px",i.style.background="#8FBC8F",i.style.position="absolute";let n=document.createElement("div");n.id="edge",i.append(n),t.append(i),n.style.minWidth=window.innerWidth+"px",n.style.minHeight="15px",n.style.background="#4D1357",n.style.zIndex="1",n.style.bottom="0px",n.style.position="absolute",console.log("content",e);let s=document.createElement("div");s.id="bird",s.style.width=this.birdWidth+"px",s.style.height=this.birdInnerHeight+"px";const r=document.createElement("img");r.style.width=this.birdWidth+"px",r.style.height=this.birdInnerHeight+"px",r.src="./../linnuke.png",s.appendChild(r),s.style.position="absolute",s.style.bottom=this.birdHeight+"px",s.style.left=this.birdPosition+"px",s.style.borderRadius="3px",t.appendChild(s);let l=document.createElement("button");l.id="startButton",l.innerText="Start",l.style.top=window.innerHeight/2-50+"px",l.style.left=window.innerWidth/2+"px",l.style.position="absolute",l.style.fontSize="2rem",l.style.borderRadius="8px",l.style.backgroundColor="#B0E0E6",l.style.color="#FF1493",t.append(l);let o=document.createElement("h1");return o.id="gameScore",o.innerHTML="Score: "+this.score,o.style.color="#FFFFFF",o.style.fontSize=window.innerWidth/25+"px",o.style.left="20px",o.style.position="absolute",o.style.top="10px",t.append(o),e}startGame(){let e=document.getElementById("bird");this.birdHeight-=this.gravity,e.style.bottom=this.birdHeight+"px",e.style.left=this.birdPosition+"px",this.birdHeight<=8&&this.gameOver()}jump(){let e=document.getElementById("bird");this.birdHeight<window.innerHeight-110&&!this.isGameOver&&(this.birdHeight+=50,e.style.bottom=this.birdHeight+"px")}Pipes(){let e=document.createElement("div");e.id="pipe";let t=document.createElement("div");t.id="topPipe";let i=5*this.birdInnerHeight,n=Math.ceil(window.innerWidth/15),s=Math.ceil(window.innerWidth),r=Math.ceil(window.innerHeight),l=r-i-Math.ceil(400*Math.random()),o=r-l-i;const d=document.createElement("img");d.style.width=n+"px",d.style.height=l+"px",d.src="./../post3.png",e.appendChild(d),e.style.position="absolute";const a=document.createElement("img");a.style.width=n+"px",a.style.height=o+"px",a.src="./../post3.png",a.style.transform="rotate(180deg) scaleX(-1)",t.appendChild(a),t.style.position="absolute",e.style.left=s+10+"px",e.style.bottom="0px",t.style.left=s+"px",t.style.borderTop="0px";let c=document.getElementById("sky"),h=document.getElementById("bird");this.isGameOver||(c.appendChild(e),c.appendChild(t));let m=setInterval((()=>{if(this.isGameOver||(s-=2,e.style.left=s+"px",t.style.left=s+"px"),-70===s&&(c.removeChild(e),c.removeChild(t)),s==this.birdPosition||s+1==this.birdPosition){this.score+=1;let e=document.getElementById("gameScore");e.innerHTML="Score: "+this.score,c.append(e)}(this.birdHeight<=10||s-this.birdWidth<this.birdPosition&&s+n>this.birdPosition&&(this.birdHeight<=l||this.birdHeight+this.birdInnerHeight+20>=l+i))&&(clearInterval(m),c.removeChild(h),this.gameOver())}),14)}gameOver(){this.isGameOver=!0,clearInterval(this.gameTimerId),clearInterval(this.timerIdPipes),this.score>0?this.textGameOver():(document.querySelector("#statistics").disabled=!1,document.querySelector("#game").disabled=!1,this.birdHeight=Math.ceil(window.innerHeight/3),this.run())}textGameOver(){let e=document.getElementById("sky"),t=document.createElement("h1");e.appendChild(t),t.innerHTML="Game Over",t.style.color="#FFFFFF",t.style.left=window.innerWidth/2-85+"px",t.style.position="absolute",t.style.top=window.innerHeight/2-50+"px";let i=document.getElementById("form");i.style.display="block",i.style.top=window.innerHeight/2+20+"px",i.style.left=window.innerWidth/2-80+"px",i.style.position="absolute",i.style.zIndex="1",document.getElementById("score").value=this.score,e.append(i)}}(t,i),s=new class{constructor(t){this.viewContainer=t,this.isRunning=!1,this.brain=new e,this.storage=window.localStorage}run(){document.querySelector("#game").disabled=!1,this.isRunning=!0,this.viewContainer.innerHTML="";const e=new URLSearchParams(window.location.search),t=e.get("nameInput"),i=e.get("score");null!=t&&this.storage.setItem(t,i),this.viewContainer.append(this.getBoardHtml())}stop(){this.isRunning=!1}resizeUi(){this.isRunning&&(this.viewContainer.innerHTML="",this.viewContainer.append(this.getBoardHtml()))}getBoardHtml(){let e=document.createElement("div");e.style.background="#F2DBF6";let t=document.createElement("div");t.innerText="Leader board",t.style.textAlign="center",t.style.width="100%",t.style.fontSize="2rem",t.style.color="#FF1493",e.append(t);let i=document.createElement("table");i.style.position="absolute",i.style.width="35%",i.classList.add("center"),i.style.top="13%",i.style.left="35%",i.style.marginLeft="auto",i.style.marginRight="auto";let n=document.createElement("tr"),s=document.createElement("td");s.innerText="#",s.style.fontSize="22px",s.style.color="#A01FB8",s.style.textAlign="center",s.style.paddingBottom="2rem";let r=document.createElement("td");r.innerText="Name",r.style.fontSize="22px",r.style.color="#A01FB8",r.style.paddingLeft="2rem",r.style.paddingBottom="2rem";let l=document.createElement("td");l.innerText="Score",l.style.fontSize="22px",l.style.color="#A01FB8",l.style.textAlign="center",l.style.paddingBottom="2rem",n.append(s,r,l),i.append(n);let o=1;for(let e=0;e<this.storage.length;e++){let t=document.createElement("tr"),n=localStorage.key(e),s=localStorage.getItem(n),r=document.createElement("td");r.innerText=o+".",r.style.fontSize="20px",r.style.color="#43094E",r.style.textAlign="center";let l=document.createElement("td");l.innerText=n,l.style.fontSize="20px",l.style.color="#43094E",l.style.paddingLeft="2rem";let d=document.createElement("td");d.innerText=s,d.style.fontSize="20px",d.style.color="#43094E",d.style.textAlign="center",t.append(r,l,d),o++,i.append(t)}return e.append(i),e}}(i),r=function(){let e=document.createElement("div");return e.id="main",e}();document.body.append(r);let l=function(e){let t=document.createElement("div");t.id="control";let i=document.createElement("button");i.id="statistics",i.style.color="#FF1493",i.style.fontSize="1rem",i.innerText="Statistics";let n=document.createElement("button");return n.id="game",n.style.color="#FF1493",n.style.fontSize="1rem",n.innerText="Game",t.append(i),t.append(n),i.addEventListener("click",e),n.addEventListener("click",e),t}((function(e){switch(console.log(e),e.target.id){case"game":s.stop(),n.run();break;case"statistics":n.stop(),s.run()}}));r.append(l),r.append(i),s.run(),window.addEventListener("resize",(()=>{n.resizeUi(),s.resizeUi()}))})();